# TerseTalk9
A tiny terse Smalltalk for 8-bit CPUs with a 64KB address space, like the Motorola 6809.

Currently I'm writing it under linux, but eventually I'll retarget it
to some configuration of NitrOS9 on the m6809.

## Object Model

As in smalltalk,

   * All data is in objects.
   * All objects are an instance of some Class.
   * All non-meta-class classes are instances of their own meta-class.
   * All meta-class classes are instances of Metaclass.

The memory space could be significantly less than 64KB.

Short ints are 15-bit signed integers.  They fit into a 16-bit
pointer with a tag bit (the least significant bit).

Objects are limited to 250 bytes.
That includes strings and methods with their bytecodes.
By using a tree of objects, it is possible to implement
bigger data structures.

There are other limits: At most 255 classes.
At most 255 interned symbols (each method name is an
interned symbol).

## Method Syntax

For compatibility with the COCO 1 & 2, and to simplify things,
all letters are treated as upper case.  ASCII characters that are not
on a COCO 1 keyboard are not used.

The lower levels of syntax are like smalltalk.
The upper levels are different.
There are no Smalltalk Blocks; instead there are things
called Macros that implement flow control.

Instead of declaring local variables, assign to them (as in Python).

The value of a sequence is the value of its final part.
In Smalltalk, the return syntax ("^") is needed a lot.
In TerseTalk, return is rarely needed, and is provided by a macro.

    sequence ::= maybeList ( ( "." | ";" ) maybeList )*

    assignment ::= ( identifierList "=" )? maybeList

    maybeList ::= colonSend ( "," colonSend )*

    colonSend ::= comparison ( identifier ":" comparison )+

    comparison ::= sum ( ( "==" | "!=" | "<" | "<=" | ">" | ">=" ) sum )?

    sum ::= product ( ( "+" | "-" ) product )?

    product ::= unary ( ( "+" | "-" ) unary )?

    unary ::= prim ( identifier )*

    prim ::= identifier | number | "(" sequence ")" | macro

    macro ::= ( identifier "(" maybeVar expression ") )+

    maybeVar ::= ( identifierList ":" )?

    identifierList ::= identifier ( "," identifier )*

## Macros

Some proposals:

    IF ( a ) THEN ( b )
    IF ( a ) THEN ( b ) ELSE ( c )
    WHILE ( a ) DO ( b )
    FOR ( i : list ) DO ( stuff )
    FOR ( i : list ) MAP ( stuff )
    BOTH ( a ) AND ( b )
    EITHER ( a ) OR ( b )
    RETURN ( a )

## Genesis

The initial image file and virtual machine are generated by a
python script genesis.py.

## TODO

This is still in progress (both the code and the documentation).
